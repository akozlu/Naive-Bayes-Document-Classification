
Do you have the X source code?  Simply look in mit/clients/xwininfo/xwininfo.c and you
will find out exactly how to do it.  :-)